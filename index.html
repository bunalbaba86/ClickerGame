<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>1v1 Dövüş Oyunu</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #222;
    color: white;
    text-align: center;
    padding: 20px;
  }
  .bar-container {
    width: 200px;
    height: 20px;
    background: #555;
    margin: 10px auto;
    border-radius: 10px;
  }
  .health-bar {
    height: 100%;
    background-color: limegreen;
    border-radius: 10px;
    transition: width 0.3s ease;
  }
  .mana-bar {
    height: 100%;
    background-color: deepskyblue;
    border-radius: 10px;
    transition: width 0.3s ease;
  }
  #attack-effect {
    position: absolute;
    font-size: 2rem;
    font-weight: bold;
    top: 100px;
    left: 50%;
    transform: translateX(-50%);
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.5s ease;
  }
  #attack-effect.critical {
    color: red;
    text-shadow: 0 0 10px red;
  }
  #log {
    margin-top: 20px;
    font-weight: bold;
    min-height: 30px;
  }
  button {
    padding: 10px 15px;
    margin: 5px;
    font-size: 1rem;
    cursor: pointer;
  }
  button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }
  #game-area {
    position: relative;
    margin-top: 30px;
  }
</style>
</head>
<body>

<h1>1v1 Dövüş Oyunu</h1>

<div id="game-area">
  <div>
    <h2>Sen</h2>
    <div class="bar-container">
      <div id="player-health" class="health-bar" style="width:100%"></div>
    </div>
    <div>Can: <span id="player-hp">100</span></div>
    <div class="bar-container">
      <div id="player-mana" class="mana-bar" style="width:50%"></div>
    </div>
    <div>Mana: <span id="player-mana-text">50</span></div>
  </div>

  <div>
    <h2>Rakip</h2>
    <div class="bar-container">
      <div id="enemy-health" class="health-bar" style="width:100%"></div>
    </div>
    <div>Can: <span id="enemy-hp">100</span></div>
    <div class="bar-container">
      <div id="enemy-mana" class="mana-bar" style="width:50%"></div>
    </div>
    <div>Mana: <span id="enemy-mana-text">50</span></div>
  </div>

  <div id="attack-effect"></div>
</div>

<div>
  <h3>Saldırı Seç:</h3>
  <button id="btn-fireball">Alev Topu (20 dmg, 30 mana)</button>
  <button id="btn-punch">Yumruk (10 dmg, 5 mana)</button>
  <button id="btn-basic">Temel Saldırı (+10 mana)</button>
</div>

<div id="log"></div>
<button id="reset-btn" style="margin-top:20px;">Yeniden Başlat</button>

<script>
  const player = { hp: 100, mana: 50 };
  const enemy = { hp: 100, mana: 50 };

  const log = document.getElementById('log');
  const attackEffect = document.getElementById('attack-effect');

  const updateUI = () => {
    document.getElementById('player-health').style.width = player.hp + '%';
    document.getElementById('player-hp').textContent = player.hp;
    document.getElementById('player-mana').style.width = player.mana + '%';
    document.getElementById('player-mana-text').textContent = player.mana;

    document.getElementById('enemy-health').style.width = enemy.hp + '%';
    document.getElementById('enemy-hp').textContent = enemy.hp;
    document.getElementById('enemy-mana').style.width = enemy.mana + '%';
    document.getElementById('enemy-mana-text').textContent = enemy.mana;

    btnFireball.disabled = player.mana < 30 || isGameOver();
    btnPunch.disabled = player.mana < 5 || isGameOver();
    btnBasic.disabled = isGameOver();
  };

  const isGameOver = () => player.hp <= 0 || enemy.hp <= 0;

  function showAttackEffect(text, critical = false) {
    attackEffect.textContent = text;
    attackEffect.className = critical ? 'critical' : '';
    attackEffect.style.opacity = '1';

    setTimeout(() => {
      attackEffect.style.opacity = '0';
    }, 800);
  }

  function enemyAttack() {
    if (enemy.hp <= 0) return;

    // Basit rakip saldırısı (her saldırıda 15 zarar, mana 20)
    if (enemy.mana >= 20) {
      const crit = Math.random() < 0.1;
      let dmg = 15;
      if (crit) dmg = Math.floor(dmg * 1.5);

      player.hp = Math.max(player.hp - dmg, 0);
      enemy.mana -= 20;

      log.textContent = `Rakip saldırdı: ${dmg}${crit ? ' (Kritik!)' : ''} hasar!`;
      showAttackEffect('-' + dmg, crit);
    } else {
      enemy.mana = Math.min(enemy.mana + 10, 100);
      log.textContent = 'Rakip mana topluyor...';
    }

    updateUI();
    checkGameEnd();
  }

  function checkGameEnd() {
    if (player.hp <= 0) {
      log.textContent = 'Kaybettin!';
      disableButtons(true);
    } else if (enemy.hp <= 0) {
      log.textContent = 'Kazandın!';
      disableButtons(true);
    }
  }

  function disableButtons(disabled) {
    btnFireball.disabled = disabled;
    btnPunch.disabled = disabled;
    btnBasic.disabled = disabled;
  }

  function playerAttack(type) {
    if (isGameOver()) return;

    let damage = 0;
    let manaCost = 0;
    let manaGain = 0;

    if (type === 'fireball') {
      damage = 20;
      manaCost = 30;
    } else if (type === 'punch') {
      damage = 10;
      manaCost = 5;
    } else if (type === 'basic') {
      damage = 0;
      manaCost = 0;
      manaGain = 10;
    }

    if (player.mana < manaCost) {
      log.textContent = 'Yeterli mana yok!';
      return;
    }

    player.mana -= manaCost;
    player.mana = Math.min(player.mana + manaGain, 100);

    if (damage > 0) {
      const critical = Math.random() < 0.1;
      if (critical) damage = Math.floor(damage * 1.5);

      enemy.hp = Math.max(enemy.hp - damage, 0);
      log.textContent = `Saldırdın: ${damage}${critical ? ' (Kritik!)' : ''} hasar!`;
      showAttackEffect('-' + damage, critical);
    } else {
      log.textContent = 'Mana topladın!';
      showAttackEffect('+10 Mana', false);
    }

    updateUI();

    setTimeout(() => {
      enemyAttack();
    }, 1000);

    setTimeout(() => {
      checkGameEnd();
    }, 1100);
  }

  const btnFireball = document.getElementById('btn-fireball');
  const btnPunch = document.getElementById('btn-punch');
  const btnBasic = document.getElementById('btn-basic');
  const btnReset = document.getElementById('reset-btn');

  btnFireball.onclick = () => playerAttack('fireball');
  btnPunch.onclick = () => playerAttack('punch');
  btnBasic.onclick = () => playerAttack('basic');

  btnReset.onclick = () => {
    player.hp = 100;
    player.mana = 50;
    enemy.hp = 100;
    enemy.mana = 50;
    log.textContent = 'Oyun yeniden başlatıldı.';
    updateUI();
    disableButtons(false);
  };

  updateUI();
</script>

</body>
</html>